import type { Address } from "abitype";
import type { Hash, Hex, RpcTransactionRequest, Transport } from "viem";
import type { SignTypedDataParameters } from "viem/accounts";
import type { BaseSmartContractAccount } from "../account/base.js";
import type { SignTypedDataParams } from "../account/types.js";
import type { PublicErc4337Client, SupportedTransports } from "../client/types.js";
import type { BatchUserOperationCallData, UserOperationCallData, UserOperationReceipt, UserOperationRequest, UserOperationResponse, UserOperationStruct } from "../types.js";
type WithRequired<T, K extends keyof T> = Required<Pick<T, K>>;
type WithOptional<T, K extends keyof T> = Pick<Partial<T>, K>;
export type ConnectorData = {
    chainId?: Hex;
};
export interface ProviderEvents {
    chainChanged(chainId: Hex): void;
    accountsChanged(accounts: Address[]): void;
    connect(data: ConnectorData): void;
    message({ type, data }: {
        type: string;
        data?: unknown;
    }): void;
    disconnect(): void;
    error(error: Error): void;
}
export type SendUserOperationResult = {
    hash: string;
    request: UserOperationRequest;
};
export type AccountMiddlewareFn = (struct: UserOperationStruct) => Promise<UserOperationStruct>;
export type AccountMiddlewareOverrideFn<Req extends keyof UserOperationStruct = never, Opt extends keyof UserOperationStruct = never> = (struct: UserOperationStruct) => Promise<WithRequired<UserOperationStruct, Req> & WithOptional<UserOperationStruct, Opt>>;
export type PaymasterAndDataMiddleware = AccountMiddlewareOverrideFn<"paymasterAndData", "callGasLimit" | "preVerificationGas" | "verificationGasLimit" | "maxFeePerGas" | "maxPriorityFeePerGas">;
export type GasEstimatorMiddleware = AccountMiddlewareOverrideFn<"callGasLimit" | "preVerificationGas" | "verificationGasLimit">;
export type FeeDataMiddleware = AccountMiddlewareOverrideFn<"maxFeePerGas" | "maxPriorityFeePerGas">;
export interface ISmartAccountProvider<TTransport extends SupportedTransports = Transport> {
    readonly rpcClient: PublicErc4337Client<TTransport>;
    readonly dummyPaymasterDataMiddleware: AccountMiddlewareFn;
    readonly paymasterDataMiddleware: AccountMiddlewareFn;
    readonly gasEstimator: AccountMiddlewareFn;
    readonly feeDataGetter: AccountMiddlewareFn;
    readonly customMiddleware?: AccountMiddlewareFn;
    readonly account?: BaseSmartContractAccount;
    sendUserOperation: (data: UserOperationCallData | BatchUserOperationCallData) => Promise<SendUserOperationResult>;
    waitForUserOperationTransaction: (hash: Hash) => Promise<Hash>;
    getUserOperationByHash: (hash: Hash) => Promise<UserOperationResponse>;
    getUserOperationReceipt: (hash: Hash) => Promise<UserOperationReceipt>;
    sendTransaction: (request: RpcTransactionRequest) => Promise<Hash>;
    sendTransactions: (request: RpcTransactionRequest[]) => Promise<Hash>;
    request(args: {
        method: string;
        params?: any[];
    }): Promise<any>;
    signMessage: (msg: string | Uint8Array) => Promise<Hash>;
    signTypedData: (params: SignTypedDataParameters) => Promise<Hash>;
    signMessageWith6492(msg: string | Uint8Array | Hex): Promise<Hex>;
    signTypedDataWith6492(params: SignTypedDataParams): Promise<Hash>;
    getAddress: () => Promise<Address>;
    withPaymasterMiddleware: (overrides: {
        dummyPaymasterDataMiddleware?: PaymasterAndDataMiddleware;
        paymasterDataMiddleware?: PaymasterAndDataMiddleware;
    }) => this;
    withGasEstimator: (override: GasEstimatorMiddleware) => this;
    withFeeDataGetter: (override: FeeDataMiddleware) => this;
    withCustomMiddleware: (override: AccountMiddlewareFn) => this;
    connect(fn: (provider: PublicErc4337Client<TTransport>) => BaseSmartContractAccount): this & {
        account: BaseSmartContractAccount;
    };
    disconnect(): this & {
        account: undefined;
    };
}
export {};
